function test_cunit() {
    const sp = [0x2468ACE0, 0x13579BDF, 0xFEDCBA98, 0x76543210];
    const a = [
        0, -1, -2, sp, -4 , -5, -6, -7, -8, -9,
        -10, -11, -12, -13, -14, -15, -16, -17, -18,
        0x12345607, 0x89ABCDEF];
    const u = EPDCUnitMap(EUDVariable(EPD(a)));
    var ret = 0;
    if (u.order == 0x56) ret += 1;
    if (u.owner == P8) ret += 2;
    if (u.orderState == 0x34) ret += 4;
    if (u.orderSignal == 0x12) ret += 8;
    if (u.orderUnitType == 0xCDEF) ret += 16;
    wwrite_epd(EPD(a) + 0x50/4, 0, $U("Artanis"));
    if (u.orderUnitType == py_str("Artanis")) ret += 32;
    u.die();
    if (a[0x4C/4] == 0x12340007) ret += 64;
    if (u.is_dying()) ret += 128;
    u.cgive(P1);
    return ret;
}